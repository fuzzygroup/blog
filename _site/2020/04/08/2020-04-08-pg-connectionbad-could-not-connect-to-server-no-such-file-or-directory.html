<p class="center"><img src="/blog/assets/IMG_2993.jpeg" alt="IMG_2993.jpeg" /></p>

<p>I've recently had the situation where my personal development box (OSX Mojave, Rails, Postgres) has become unstable with, at times, multiple crashes per day.  I logged in this morning and found myself getting errors like this:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>PG::ConnectionBad (could not connect to server: No such file or directory)
</code></pre>
</div>

<p>I did some digging and even though Postgres appeared to be running to brew, it was a false positive due to a leftover postmaster.pd file.  Here was the fix:</p>

<ol>
  <li>
    <table>
      <tbody>
        <tr>
          <td>First make sure that postgres isn't running use ps i.e. **ps auwwx</td>
          <td>grep post**.</td>
        </tr>
      </tbody>
    </table>
  </li>
  <li>Delete the file: /usr/local/var/postgres/postmaster.pid i.e. <strong>rm /usr/local/var/postgres/postmaster.pid</strong></li>
  <li>At this point brew will, foolishly and oddly, still think Postgres is running so do do a <strong>brew restart postgres</strong></li>
</ol>

<p>Here's a handy <a href="https://stackoverflow.com/questions/13573204/psql-could-not-connect-to-server-no-such-file-or-directory-mac-os-x">Stack Overflow reference</a>.</p>

<p><strong>Note</strong>: Make absolutely sure that postgres is NOT running before you delete postmaster.pid or you risk serious database corruption / data loss.</p>

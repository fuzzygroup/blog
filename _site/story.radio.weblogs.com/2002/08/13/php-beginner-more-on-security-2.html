<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>PHP Beginner- More on Security - 2</title>
  <meta name="description" content="        PHP Beginner: More on Security - 2        ">

  <link rel="stylesheet" href="/blog/css/main.css">
  <link rel="canonical" href="http://fuzzyblog.io//blog/story.radio.weblogs.com/2002/08/13/php-beginner-more-on-security-2.html">
  <link rel="alternate" type="application/rss+xml" title="FuzzyBlog" href="http://fuzzyblog.io//blog/feed.xml">
  
  <!-- twitter specific head tags -->
  
  <meta name="twitter:card" content="summary">
  <meta name="twitter:site" content="@fuzzygroup">
  <meta name="twitter:creator" content="@fuzzygroup">
  <meta name="twitter:title" content="PHP Beginner- More on Security - 2">

  
    <meta name="twitter:description"
      content="

    
    PHP Beginner: More on Security - 2
    
    


  
    
    
  



  
    
    
  



  
    
      
    
    
      Last updated: 8/13/2002; 9:35:50 AM
    
    
      
    
  



  
   ...">
  

  
    <meta name="twitter:image"
      content="https://fuzzyblog.io/blog/assets/scott_johnson.jpg">
  
  
  
  
  
  
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-83931583-1', 'auto');
    ga('send', 'pageview');

  </script>
  
</head>


  <body>

    <header class="site-header">

  <div class="wrapper">

    <a class="site-title" href="/blog/">FuzzyBlog</a>

    <nav class="site-nav">
      <a href="#" class="menu-icon">
        <svg viewBox="0 0 18 15">
          <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
          <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
          <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
        </svg>
      </a>

      <div class="trigger">
        
          
          <a class="page-link" href="/blog/about/">About</a>
          
        
          
          <a class="page-link" href="/blog/aws.html">AWS</a>
          
        
          
          <a class="page-link" href="/blog/category.html">Category</a>
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
          <a class="page-link" href="/blog/resume.html">Resume for J. Scott Johnson</a>
          
        
          
          <a class="page-link" href="/blog/tag.html">Tag</a>
          
        
      </div>
    </nav>

  </div>

</header>


    <div class="page-content">
      <div class="wrapper">
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title" itemprop="name headline">PHP Beginner- More on Security - 2</h1>
    <p class="I'll"><time datetime="2002-08-13T00:00:00-04:00" itemprop="datePublished">Aug 13, 2002</time></p>
  </header>

  <div class="post-content" itemprop="articleBody">
    <head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta http-equiv="Expires" content="Mon, 01 Jan 1990 01:00:00 GMT" />
    <title>PHP Beginner: More on Security - 2</title>
    <style type="text/css">
      body {
        margin-top: 0px;
        margin-left: 0px;
        margin-right: 0px;
        margin-bottom: 0px;
        }

      body, td, p {
        font-family: verdana, sans-serif;
        font-size: 90%;
        }

      h2 { 
        font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 24px; font-weight: bold
        }
      .header {
        font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 40px; font-weight: bold
        }
      .realsmall {
        font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 9px;
        }
      .small {
        font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 10px;
        }
      </style>
    </head>

<table>
  <tbody>
    <tr>
    </tr>
  </tbody>
</table>

<table>
  <tbody>
    <tr>
    </tr>
  </tbody>
</table>

<table>
  <tbody>
    <tr>
      <td><img src="http://radio.weblogs.com/0103807/images/trans60x60.gif" alt="" /></td>
    </tr>
    <tr>
      <td>Last updated: 8/13/2002; 9:35:50 AM</td>
    </tr>
    <tr>
      <td><img src="http://radio.weblogs.com/0103807/images/trans60x60.gif" alt="" /></td>
    </tr>
  </tbody>
</table>

<table>
  <tbody>
    <tr>
      <td><img src="http://radio.weblogs.com/0103807/images/trans60x1.gif" alt="" /></td>
    </tr>
    <tr>
      <td> </td>
    </tr>
  </tbody>
</table>

<font size="+3"><b><a href="http://radio.weblogs.com/0103807/" style="color:black; text-decoration:none">The FuzzyBlog!</a></b></font>
<p><em>Marketing 101. Consulting 101. PHP Consulting. Random geeky stuff. I Blog Therefore I Am.</em></p>

<font size="+1"><b>PHP Beginner: More on Security - 2</b></font>

<p>Note – some of this is redundant with my other expansion on security.  Some of it is probably not.  I thought it might help some folks out.  Hence the post.</p>

<font face="Arial" size="2">Wow, I didn't mean to put you to that much work. Thanks alot!  It Works! Thank you so much :)</font>
<blockquote>
  <p>—– Original Message —–</p>

  <p><strong>From:</strong> <a href="&#109;&#097;&#105;&#108;&#116;&#111;:&#115;&#099;&#111;&#116;&#116;&#064;&#102;&#117;&#122;&#122;&#121;&#103;&#114;&#111;&#117;&#112;&#046;&#099;&#111;&#109;" title="scott@fuzzygroup.com">J. Scott Johnson</a></p>

  <p><strong>To:</strong> XXX</p>

  <p><strong>Sent:</strong> Sunday, July 21, 2002 6:08 AM</p>

  <p><strong>Subject:</strong> RE: Handling Users and Passwords</p>

  <font face="Arial" color="#0000ff" size="2">Hi there, </font>

  <font face="Arial" color="#0000ff" size="2"></font>
  <p> </p>

  <font face="Arial" color="#0000ff" size="2">I just hit the same problem myself and i think it's missing the header command to redirect you to another location i.e. after the cookies have been set and the user is authenticated then add this line: </font>

  <font face="Arial" color="#0000ff" size="2"></font>
  <p> </p>

  <font face="Arial" color="#0000ff" size="2">  header("Location: control.php"); </font>

  <font face="Arial" color="#0000ff" size="2"></font>
  <p> </p>

  <font face="Arial" color="#0000ff" size="2">where "control.php" is the url you want to go.</font>

  <font face="Arial" color="#0000ff" size="2"></font>
  <p> </p>

  <font face="Arial" color="#0000ff" size="2">If that's not it then I'd check if the $num_rows returned by the database query is 1.  If not it may be that there isn't a fall thru on the last clause of the if test.  </font>

  <font face="Arial" color="#0000ff" size="2"></font>
  <p> </p>

  <font face="Arial" color="#0000ff" size="2">NOTE: I just rewrote it from scratch since it was easier than going to <a href="http://www.phpbeginner.com/">www.phpbeginner.com</a> which desperately needs a "view entire article" feature.</font>

  <font face="Arial" color="#0000ff" size="2"></font>
  <p> </p>

  <font face="Arial" color="#0000ff" size="2">Here's the full code I just rewrote:</font>

  <font face="Arial" color="#0000ff" size="2"></font>
  <p> </p>

  <font face="Arial" color="#0000ff" size="2">&lt;?php<br /><a href="//">//</a> <a href="//////////////////////////////////////////////////////">//////////////////////////////////////////////////////</a><br /><a href="//">//</a> Mock loging page -- takes your login -- and sets<br /><a href="//&amp;nbsp">//&amp;nbsp</a>; the correct cookie triad<br /><a href="//&amp;nbsp">//&amp;nbsp</a>; ck_username<br /><a href="//&amp;nbsp">//&amp;nbsp</a>; ck_emailaddress<br /><a href="//&amp;nbsp">//&amp;nbsp</a>; ck_userid<br /><a href="//&amp;nbsp">//&amp;nbsp</a>; ck_password<br /><a href="//">//</a> <a href="/////////////////////////////////////////////////////">/////////////////////////////////////////////////////</a></font>

  <p> </p>

  <font face="Arial" color="#0000ff" size="2">  include "../z/zcommon.php";</font>

  <p> </p>

  <font face="Arial" color="#0000ff" size="2">  $link = mysql_connect("$dbhost", "$dbuser", "$dbpassword")<br />    or die("Could not connect");</font>

  <p> </p>

  <font face="Arial" color="#0000ff" size="2">  <a href="//select">//select</a> the database<br />  mysql_select_db("$db")<br />    or die("Could not select database");<br />    <a href="//print">//print</a> "|$loginusername|";die();<br />  $query = "SELECT username, password, initials, emailaddress FROM fo_useremailaccounts where username='$loginusername' order by user_id limit 1";</font>

  <p> </p>

  <font face="Arial" color="#0000ff" size="2">  $result = mysql_query($query)<br />    or die ('&lt;H1 align=center&gt;&lt;font color=red&gt;Bad Database Request&lt;/font&gt;&lt;/H2&gt; in :&lt;BR&gt;'<br />    . __FILE__.' line '. __LINE__ <br />    .'&lt;BR&gt;&lt;br /&gt;&lt;b&gt;The query used was:&lt;/b&gt;&lt;BR&gt;&lt;BR&gt; '.$query<br />    .'&lt;BR&gt;&lt;br /&gt;&lt;b&gt;MySQL says&lt;/b&gt;&lt;BR&gt;&lt;BR&gt; '.mysql_error()<br />    .'&lt;BR&gt;&lt;BR&gt;Email administrator for help at ' . $sysadminemail . ' for help' );</font>

  <p> </p>

  <font color="#0000ff"><br /><font face="Arial" size="2">  $num_rows = mysql_num_rows($result);<br />  <a href="//login">//login</a> succeeds if the query succeeds i.e. there is at least 1 user who matches<br />  if ($num_rows == 1) {<br />    $row = mysql_fetch_array($result);<br />    $password = $row["password"];<br />    $username = $row["username"];<br />    $emailaddress = $row["emailaddress"];<br />    $initials = $row["initials"];<br />    <a href="//print">//print</a> "in if";die();<br /></font></font>

  <font face="Arial" size="2">    if ($loginpassword == $password) {<br />    <a href="//">//</a> success!!! They have access</font>

  <font face="Arial" size="2"></font>
  <p> </p>

  <font face="Arial" size="2">      setcookie("ck_username",$username);<br />      setcookie("ck_password",$password);<br />      setcookie("ck_emailaddress",$emailaddress);<br />      setcookie("ck_userid",$userid);<br />      setcookie("ck_initials",$initials);</font>

  <font face="Arial" size="2"></font>
  <p> </p>

  <font face="Arial" size="2">      header("Location: </font>
  <p><a href="http://www.fuzzygroup.net/fuzzyoffice/control_pagebody.htm"><font face="Arial" size="2"><a href="http://www.fuzzygroup.net/fuzzyoffice/control_pagebody.htm">http://www.fuzzygroup.net/fuzzyoffice/control_pagebody.htm</a></font></a><font face="Arial" size="2">");<br />      <a href="//print">//print</a> "doh!";</font></p>

  <font face="Arial" size="2"></font>
  <p> </p>

  <font face="Arial" size="2">    }<br />    else {<br />      print "Invalid login.  Access denied.";<br />    }<br />  }<br />  else {<br />    print "user not found in database";<br />  }<br />?&gt;<br /></font>

  <font face="Arial" size="2"></font>
  <p> </p>

  <font face="Arial" size="2"></font>
  <p> </p>

  <font face="Arial" size="2">L<span class="953595610-21072002">ogin form (with wildly different text than you need of course)</span></font>

  <font face="Arial" size="2"><span class="953595610-21072002"></span></font>
  <p> </p>

  <font face="Arial" size="2">&lt;HTML&gt;<br />&lt;HEAD&gt;<br />&lt;TITLE&gt;<br />FuzzyGroup :: FuzzyOffice :: Login<br />&lt;/TITLE&gt;<br />&lt;BODY&gt;<br />&lt;center&gt;<br />&lt;table width=750&gt;<br />&lt;tr&gt;<br />&lt;td&gt;</font>

  <font face="Arial" size="2"></font>
  <p> </p>

  <font face="Arial" size="2">Welcome to the FuzzyOffice Login page.  This grants you access to the currently available FuzzyOffice modules including Tasks, Calendar, etc (oh and it also looks better than this very simple, very plain, very white page).  From this page you can either Login (if you have an existing account) or Register (if you need an account).<br />&lt;H1&gt;Login&lt;/H1&gt;<br />Use the form below if you are already a FuzzyOffice user.<br />&lt;form name=login action="mlogin.php" method="get"&gt;</font>

  <font face="Arial" size="2"></font>
  <p> </p>

  <font face="Arial" size="2">&lt;input type="hidden" name="action" value="login"&gt;<br />        Username:<br />        &lt;input name="loginusername" type="text" width="10"&gt;&lt;BR&gt;<br />        Password:<br />        &lt;input name="loginpassword" type="password" width="10"&gt;&lt;BR&gt;<br />        &lt;INPUT TYPE=SUBMIT VALUE=<a href="http://login.userland.com/">Log In</a>&gt;<br />        &lt;/form&gt;<br />&lt;h1&gt;Registration / Sign Up&lt;/h1&gt;<br />Use this form to sign up as a new user of FuzzyOffice.<br />&lt;form name=registration action="signup.php" method="get"&gt;<br />                Username:<br />                &lt;input name="signupusername" type="text" width="10"&gt;&lt;BR&gt;<br />                Password:<br />                &lt;input name="signuppassword" type="password" width="10"&gt;&lt;BR&gt;<br />                Verify your password:<br />                &lt;input name="signuppasswordverify" type="password" width="10"&gt;&lt;BR&gt;<br />                Email Address:<br />                &lt;input name="emailaddress" type="text" width="10"&gt;&lt;BR&gt;<br />                &lt;INPUT TYPE=SUBMIT VALUE="Sign Up"&gt;<br />        &lt;/form&gt;<br />&lt;/td&gt;<br />&lt;/tr&gt;<br />&lt;/table&gt;<br />&lt;/center&gt;<br />&lt;/BODY&gt;<br />&lt;/HTML&gt;<br /></font>

  <font face="Arial" size="2"></font>
  <p> </p>

  <font face="Arial" size="2">Hope this helps.</font>

  <font face="Arial" size="2"></font>
  <p> </p>

  <font face="Arial" size="2">Scott</font>

  <font face="Arial"><br /><font size="2"></font></font>
  <blockquote>
    <font face="Tahoma" size="2">-----Original Message-----<br /><b>From:</b> Christopher Jeffrey [<a href="mailto:mailto:cjj@XXX">mailto:cjj@XXX</a>]<br /><b>Sent:</b> Friday, July 19, 2002 7:57 PM<br /><b>To:</b> <a href="mailto:scott@phpbeginner.com">scott@phpbeginner.com</a><br /><b>Subject:</b> Handling Users and Passwords<br /><br /></font>

    <font face="Arial" size="2">
<div><font face="Verdana" size="2">Hello,</font></div>
<div><font face="Verdana" size="2">I read your "Handling Users and Passwords" tutorial, and it worked fine until I tried to login.  When I login all I see is a blank page, I'm pretty sure the problem is the login form.  If you could help me out I'd appreciate it.<br /></font></div>
<div align="right"><font face="Verdana" size="2">Thanks,<br />Christopher Jeffrey</font></div></font>
  </blockquote>
</blockquote>

<p> </p>

<script language="JavaScript" type="text/javascript"><!--
	var imageUrl = "http://radio.xmlstoragesystem.com/weblogStats/count.gif";
	var imageTag = "<img src=\"" + imageUrl + "?group=radio1&usernum=103807&referer=" + escape (document.referrer) + "\" height=\"1\" width=\"1\">";
	document.write (imageTag);
	//--></script>

<table>
  <tbody>
    <tr>
      <td><img src="http://radio.weblogs.com/0103807/images/trans60x1.gif" alt="" /></td>
    </tr>
    <tr>
      <td> </td>
    </tr>
    <tr>
      <td><img src="http://radio.weblogs.com/0103807/images/trans60x60.gif" alt="" /></td>
    </tr>
    <tr>
      <td>Copyright 2002 © The FuzzyStuff</td>
    </tr>
    <tr>
      <td><img src="http://radio.weblogs.com/0103807/images/trans60x60.gif" alt="" /></td>
    </tr>
    <tr>
      <td> </td>
    </tr>
  </tbody>
</table>


  </div>
  
  

</article>

      </div>
    </div>

    <footer class="site-footer">

  <div class="wrapper">

    <h2 class="footer-heading">FuzzyBlog</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li>FuzzyBlog</li>
          <li><a href="mailto:fuzzygroup@gmail.com">fuzzygroup@gmail.com</a></li>
        </ul>
      </div>

      <div class="footer-col footer-col-2">
        <ul class="social-media-list">
          
          <li>
            <a href="https://github.com/fuzzygroup"><span class="icon icon--github"><svg viewBox="0 0 16 16"><path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/></svg>
</span><span class="username">fuzzygroup</span></a>

          </li>
          

          
          <li>
            <a href="https://twitter.com/fuzzygroup"><span class="icon icon--twitter"><svg viewBox="0 0 16 16"><path fill="#828282" d="M15.969,3.058c-0.586,0.26-1.217,0.436-1.878,0.515c0.675-0.405,1.194-1.045,1.438-1.809c-0.632,0.375-1.332,0.647-2.076,0.793c-0.596-0.636-1.446-1.033-2.387-1.033c-1.806,0-3.27,1.464-3.27,3.27 c0,0.256,0.029,0.506,0.085,0.745C5.163,5.404,2.753,4.102,1.14,2.124C0.859,2.607,0.698,3.168,0.698,3.767 c0,1.134,0.577,2.135,1.455,2.722C1.616,6.472,1.112,6.325,0.671,6.08c0,0.014,0,0.027,0,0.041c0,1.584,1.127,2.906,2.623,3.206 C3.02,9.402,2.731,9.442,2.433,9.442c-0.211,0-0.416-0.021-0.615-0.059c0.416,1.299,1.624,2.245,3.055,2.271 c-1.119,0.877-2.529,1.4-4.061,1.4c-0.264,0-0.524-0.015-0.78-0.046c1.447,0.928,3.166,1.469,5.013,1.469 c6.015,0,9.304-4.983,9.304-9.304c0-0.142-0.003-0.283-0.009-0.423C14.976,4.29,15.531,3.714,15.969,3.058z"/></svg>
</span><span class="username">fuzzygroup</span></a>

          </li>
          
        </ul>
      </div>

      <div class="footer-col footer-col-3">
        <p>Scott Johnson writing about the usual array of nerd stuff: AWS / Ansible / Ruby / Rails / Elixir / Misc / Hyde.
</p>
      </div>
    </div>

  </div>

</footer>


  </body>

</html>

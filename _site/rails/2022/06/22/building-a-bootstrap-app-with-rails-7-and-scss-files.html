<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Building a Bootstrap App with Rails 7 and SCSS Files</title>
  <meta name="description" content="As is too often the case, I find that the initial aspect of getting a modern app (Bootstrap, Tailwind, React) initially setup to be the most frustrating aspe...">

  <link rel="stylesheet" href="/blog/css/main.css">
  <link rel="canonical" href="http://fuzzyblog.io/blog/rails/2022/06/22/building-a-bootstrap-app-with-rails-7-and-scss-files.html">
  <link rel="alternate" type="application/rss+xml" title="FuzzyBlog" href="http://fuzzyblog.io/blog/feed.xml">
  
  <!-- favicons -->
  <!-- shout out to: http://www.favicon-generator.org/ --> 
  <link rel="apple-touch-icon" sizes="57x57" href="/blog/assets/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/blog/assets/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/blog/assets/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/blog/assets/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/blog/assets/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/blog/assets/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/blog/assets/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/blog/assets/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/blog/assets/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192"  href="/blog/assets/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/blog/assets/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/blog/assets/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/blog/assets/favicon-16x16.png">
  <link rel="manifest" href="/blog/assets/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/blog/assets/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <!-- end_favicons -->
  
  <!-- twitter specific head tags -->
  
  <meta name="twitter:card" content="summary">
  <meta name="twitter:site" content="@fuzzygroup">
  <meta name="twitter:creator" content="@fuzzygroup">
  <meta name="twitter:title" content="Building a Bootstrap App with Rails 7 and SCSS Files">

  
    <meta name="twitter:description"
      content="As is too often the case, I find that the initial aspect of getting a modern app (Bootstrap, Tailwind, React) initially setup to be the most frustrating aspect of Rails.  Given that I like to spin ...">
  

  
    <meta name="twitter:image"
      content="http://fuzzyblog.io/blog/assets/scott_johnson.jpg">
  
  
  
  
  
  <!--
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-83931583-1', 'auto');
    ga('send', 'pageview');

  </script>
  -->
    
  
    
  <script type="text/javascript">
    function do_search() {
      var searchForm = document.getElementById('search');
      var q = document.getElementById('q');
      var searchQuery = "site:fuzzyblog.io " + q.value;
      document.location = "https://www.google.com/search?q=" + searchQuery;
    }
  </script>
  
</head>


  <body>

    <header class="site-header">

  <div class="wrapper">

    <a class="site-title" href="/blog/">FuzzyBlog</a>

    <nav class="site-nav">
      <a href="#" class="menu-icon">
        <svg viewBox="0 0 18 15">
          <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
          <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
          <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
        </svg>
      </a>

      <div class="trigger">
        
          
          <a class="page-link" href="/blog/about/">About</a>
          
        
          
          <a class="page-link" href="/blog/aws.html">AWS</a>
          
        
          
          <a class="page-link" href="/blog/category.html">Category</a>
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
          <a class="page-link" href="/blog/resume.html">Resume for J. Scott Johnson</a>
          
        
          
          <a class="page-link" href="/blog/tag.html">Tag</a>
          
        
          
          <a class="page-link" href="/blog/youtube.html">Watch Scott Live</a>
          
        
          
        
          
        
          
        
      </div>
    </nav>

  </div>

</header>


    <div class="page-content">
      <div class="wrapper">
        <div style="width: 50%; float:left; ">
            <p style="text-align: center; padding: 10px; border: 2px dashed red">
              <a href="https://www.jobhound.io/" class="cta-button-blue">My new product is Job Hound:<br/>Make applying for tech jobs suck less!</a>
            </p>
        </div>
        <div style="width: 40%; float:right; text-align: center; valign: center; padding: 10px; border: 2px dashed blue">

            <form id="search" action="https://www.google.com/search">
              <input id="q" name="q" size=40>
              <button type="submit" form="form1" value="Search" onclick="do_search();">Search</button><br/>&nbsp;
            </form>

        </div>
        
        <!--
        <div style="width: 75%; float:left; ">&nbsp;&nbsp;&nbsp;</div>
        -->
          <!--
        <div style="width: 20%; float:right; ">
            <p style="text-align: center; padding: 10px; border: 2px dashed #000">
              <a href="http://www.fuzzyblog.io/" class="cta-button-blue">Hire Me!</a>
            </p>
        </div>
            -->
        <div style="clear: both;"></div>
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title" itemprop="name headline">Building a Bootstrap App with Rails 7 and SCSS Files</h1>
    <p class="I'll"><time datetime="2022-06-22T02:12:00-04:00" itemprop="datePublished">Jun 22, 2022</time> 
      </p> 
  </header>
  

  <div class="post-content" itemprop="articleBody">
    <p>As is too often the case, I find that the initial aspect of getting a modern app (Bootstrap, Tailwind, React) initially setup to be the most <strong>frustrating</strong> aspect of Rails.  Given that I like to spin up new apps pretty regularly, well, I spend a lot of time being frustrated with an old man's grumbling of:</p>

<blockquote>
  <p>It didn't used to be this hard.</p>
</blockquote>

<p>No it wasn't this hard.  And while I still don't really understand asset compilation, I did recently put together a new app where I pulled in SCSS files using variables from a different app and I can start to see it.</p>

<p>This blog post walks through a Rails 7 app using .scss files.</p>

<h2 id="step-1-rails-new">Step 1: Rails New</h2>

<p>Here's your Rails 7 new command to generate a new app with Bootstrap:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>rails new scss_test1 --css bootstrap
</code></pre></div></div>

<p>Yep.  That's it.  Whoa!!!  There are also options to use Tailwind.  I found this technique in the Saeloun article linked below and I will be forever grateful; seriously – <em>thank you</em>.</p>

<h2 id="step-2-add-the-sassc-rails-gem">Step 2: Add the Sassc-Rails Gem</h2>

<p>I believe this Gem is needed as sassc support is officially deprecated.  But I might be wrong about this; front end stuff changes with every Rails release so if I'm wrong, well, sigh.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gem "sassc-rails"
</code></pre></div></div>

<p><strong>NOTE</strong>: Please see the last section "That Mysterious Error"; you may not want this in your Gemfile or:</p>

<h2 id="step-3-copy-in-your-scss-files">Step 3: Copy In Your SCSS Files</h2>

<p>If you are pulling in SCSS files then you need to copy them into your:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>app/assets/stylesheets 
</code></pre></div></div>

<p>directory.  They can exist elsewhere but that directory is for stylesheets so differing on this point confuses me.</p>

<h2 id="modify-your-include-directives">Modify Your Include Directives</h2>

<p>This is the tricky bit and where you simply have to experiment.  The thing to understand is that asset compilation is just that – compilation.If you're old school enough that you understand the analogy of your stylesheet files becoming akin to a make file with all the <strong>dark magic</strong> that entails, perhaps that helps.  In your stylesheets directory there will be an initial stylesheet file, for me, it was application_bootstrap.scss and then I had copied in a number of other stylesheet files like palette.scss, landing.scss, customized_bootstrap.scss and so on.  In my core application_bootstrap.scss was this:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>// system level; installed by rails
@import 'bootstrap/scss/bootstrap';
@import 'bootstrap-icons/font/bootstrap-icons';
</code></pre></div></div>

<p>Disclaimer: I added the comment to help my understand where things came from.</p>

<p>I then modified it to look like this:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>@import './customized_bootstrap.scss';
 
// system level; installed by rails
@import 'bootstrap/scss/bootstrap';
@import 'bootstrap-icons/font/bootstrap-icons';

@import 'palette.scss';
@import 'landing.scss';    
</code></pre></div></div>

<p>Please note that the order matters – this really is a make file and what you are doing is dealing with dependencies.  As an example there are are variables defined in some files that need to be imported before other files.  In my customized_bootstrap.scss file, which I pulled in from elsewhere and another CSS engine (vite), I had to make a bunch of changes like this:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>/**
 *  import the necessary Bootstrap files 
 */
@import "../node_modules/bootstrap/scss/functions";
@import "../node_modules/bootstrap/scss/mixins";
@import '../node_modules/bootstrap/scss/variables';
@import "../node_modules/bootstrap/scss/utilities";

//@import "./node_modules/bootstrap/scss/_functions.scss";
//@import "node_modules/bootstrap/scss/functions.scss";
//@import "//node_modules/bootstrap/scss/variables";
//@import "//node_modules/bootstrap/scss/utilities";
</code></pre></div></div>

<p>The commented out items where the initial state.</p>

<p>I also had to do this:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>@import "//landing";
</code></pre></div></div>

<p>I don't understand the use of // versus ,/  But it is all just path references and we are developers – we can get this.  This was purely the desperate machinations of a developer with Stack Overflow access and the desire to make something work with an old app on the left and a new app on the right refreshing constantly until the two sites where in visual parity.  Typing this triggered a Quantum Leap memory "Hoping against hope that the next refresh would be the last".</p>

<h2 id="that-mysterious-error-or-oh-crap-deploy-">That Mysterious Error or Oh Crap Deploy …</h2>

<p>So I did all the above and had things working perfectly in development.  I got to deploy and got this crap:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>SassC::SyntaxError: Error: Function rgb is missing argument $green.
        on line 17800 of stdin
&gt;&gt;   border-color: rgb(191 219 254/var(--tw-border-opacity));
</code></pre></div></div>

<p>A wee spot of googling had me traveling over to Github where I found this <a href="https://github.com/tailwindlabs/tailwindcss/discussions/6738">thread</a>.</p>

<p>The answer turned out to be:</p>

<ul>
  <li>Remove the sasc-rails gem from Gemfile</li>
  <li>Do a bundle update</li>
  <li>Test things by running an assets precompile locally but in <strong>PRODUCTION</strong> mode</li>
</ul>

<p>Use the following command:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>RAILS_ENV=production bundle exec rake assets:precompile
</code></pre></div></div>

<h2 id="conclusion">Conclusion</h2>

<p>I won't claim to fully understand the asset pipeline but this is the closest I've gotten to understanding it.  In particular the analogy of a makefile for CSS very much helped me grok this.</p>

<h2 id="see-also">See Also</h2>

<ul>
  <li><a href="https://blog.saeloun.com/2021/11/17/rails-7-added-css-app-generator.html">The Saeloun article</a></li>
  <li><a href="https://www.reddit.com/r/rails/comments/pk7x5j/any_clue_what_with_cssscss_imports_in_rails_7/">Useful Reddit Thread</a></li>
  <li><a href="https://stackoverflow.com/questions/71231622/idiomatic-sass-processing-in-rails-7">Stack Overflow 1</a></li>
  <li><a href="https://guides.rubyonrails.org/asset_pipeline.html">Asset Pipeline Overview</a></li>
  <li><a href="https://stackoverflow.com/questions/68909199/invalid-css-value-error-while-customizing-bootstrap-5-colors-with-sass-3">Stack Overflow 2</a></li>
  <li><a href="https://github.com/twbs/rfs/tree/v9.0.3#installation">Bootstrap RFS</a></li>
  <li><a href="https://stackoverflow.com/questions/66642300/error-undefined-variable-in-rails-sass-compilation">Stack Overflow 3</a></li>
  <li><a href="https://sass-lang.com/guide">SASS Basics</a></li>
  <li><a href="https://github.com/rails/cssbundling-rails">CSS Bundling and Rails</a></li>
  <li><a href="https://stackoverflow.com/questions/26171159/require-statement-in-application-css-scss">Stack Overflow 4</a></li>
  <li><a href="https://stackoverflow.com/questions/51127038/sass-error-cant-find-stylesheet-to-import">Stack Overflow - The Extra Slash</a></li>
  <li><a href="https://www.reddit.com/r/rails/comments/rjg2ql/rails_7_assetsprecompile_results_in_loaderror/">Reddit Again</a></li>
  <li><a href="https://stackoverflow.com/questions/45624252/couldnt-find-file-css-font-awesome-with-type-text-css">Stack Overflow on Font Awesome</a></li>
</ul>

  </div>
  
  <!--
    http://fuzzyblog.io/blog/tag.html#aws
    http://localhost:5000/blog/category.html#facebook
  -->
  
  <hr/><br/>
  <p><strong>Posted In:</strong>
  
    <a href="http://fuzzyblog.io/blog/tag.html#rails" >
      #rails
    </a>
    
    <a href="http://fuzzyblog.io/blog/tag.html#bootstrap" >
      #bootstrap
    </a>
    
    <a href="http://fuzzyblog.io/blog/tag.html#sass" >
      #sass
    </a>
    
    <a href="http://fuzzyblog.io/blog/tag.html#scss" >
      #scss
    </a>
    
  </p>
  
  <!--
  <hr/><br/>
  <div style="text-align: center;">
      <ul class="list-inline tags" >       
     
     <li style="display: inline-block;">
       <a href="http://fuzzyblog.io/blog/tag.html#rails" class="link_button">
         rails
       </a>
     </li>
     
     <li style="display: inline-block;">
       <a href="http://fuzzyblog.io/blog/tag.html#bootstrap" class="link_button">
         bootstrap
       </a>
     </li>
     
     <li style="display: inline-block;">
       <a href="http://fuzzyblog.io/blog/tag.html#sass" class="link_button">
         sass
       </a>
     </li>
     
     <li style="display: inline-block;">
       <a href="http://fuzzyblog.io/blog/tag.html#scss" class="link_button">
         scss
       </a>
     </li>
     
    </ul>

  </div>
-->  


  
  
  

</article>

<!--
<div class="just-comments" data-apikey="2fb5b93f-dad4-41c0-a9c4-645079ddc541"></div>
<script async src="https://just-comments.com/w.js"></script>
-->

      </div>
    </div>

    <div class="wrapper">
  <div style="">
    <!--
    <p style="text-align: center; padding: 10px; border: 2px dashed #000">
      <a href="https://www.gamenanny.io/" class="cta-button-blue">My new product is Game Nanny: Never be surprised by your kid's Xbox spending again!</a>
    </p>
      -->
      <p style="text-align: center; padding: 10px; border: 2px dashed red">
        <a href="https://www.jobhound.io/" class="cta-button-blue">My new product is Job Hound:<br/>Make applying for tech jobs suck less!</a>
      </p>
      
  </div>
</div>

<footer class="site-footer">

  <div class="wrapper">

    <h2 class="footer-heading">FuzzyBlog</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li>FuzzyBlog</li>
          <li><a href="mailto:fuzzygroup@gmail.com">fuzzygroup@gmail.com</a></li>
        </ul>
      </div>

      <div class="footer-col footer-col-2">
        <ul class="social-media-list">
          
          <li>
            <a href="https://github.com/fuzzygroup"><span class="icon icon--github"><svg viewBox="0 0 16 16"><path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/></svg>
</span><span class="username">fuzzygroup</span></a>

          </li>
          

          
          <li>
            <a href="https://twitter.com/fuzzygroup"><span class="icon icon--twitter"><svg viewBox="0 0 16 16"><path fill="#828282" d="M15.969,3.058c-0.586,0.26-1.217,0.436-1.878,0.515c0.675-0.405,1.194-1.045,1.438-1.809c-0.632,0.375-1.332,0.647-2.076,0.793c-0.596-0.636-1.446-1.033-2.387-1.033c-1.806,0-3.27,1.464-3.27,3.27 c0,0.256,0.029,0.506,0.085,0.745C5.163,5.404,2.753,4.102,1.14,2.124C0.859,2.607,0.698,3.168,0.698,3.767 c0,1.134,0.577,2.135,1.455,2.722C1.616,6.472,1.112,6.325,0.671,6.08c0,0.014,0,0.027,0,0.041c0,1.584,1.127,2.906,2.623,3.206 C3.02,9.402,2.731,9.442,2.433,9.442c-0.211,0-0.416-0.021-0.615-0.059c0.416,1.299,1.624,2.245,3.055,2.271 c-1.119,0.877-2.529,1.4-4.061,1.4c-0.264,0-0.524-0.015-0.78-0.046c1.447,0.928,3.166,1.469,5.013,1.469 c6.015,0,9.304-4.983,9.304-9.304c0-0.142-0.003-0.283-0.009-0.423C14.976,4.29,15.531,3.714,15.969,3.058z"/></svg>
</span><span class="username">fuzzygroup</span></a>

          </li>
          
        </ul>
      </div>

      <div class="footer-col footer-col-3">
        <p>Scott Johnson writing about the usual array of nerd stuff: AWS / Ansible / Ruby / Rails / Elixir / Misc / Hyde.
</p>
      </div>
    </div>

  </div>

</footer>


  </body>

</html>
